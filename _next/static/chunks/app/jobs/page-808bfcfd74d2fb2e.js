(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[531],{2941:(e,t,a)=>{Promise.resolve().then(a.bind(a,6866))},6866:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>w});var r=a(2682),s=a(3986);let l=[{id:"warrior",label:"战士",tone:"from-rose-600 to-orange-600"},{id:"magician",label:"魔法师",tone:"from-indigo-600 to-sky-600"},{id:"bowman",label:"弓箭手",tone:"from-emerald-600 to-lime-600"},{id:"thief",label:"飞侠",tone:"from-slate-700 to-zinc-900"},{id:"pirate",label:"海盗",tone:"from-cyan-600 to-blue-700"}],n={1:"1转",2:"2转",3:"3转",4:"4转",5:"5转",6:"6转"},i=[1,2,3,4,5,6],d=e=>[{step:1,name:e,short:"1st"},{step:2,name:"".concat(e," \xb7 2转"),short:"2nd"},{step:3,name:"".concat(e," \xb7 3转"),short:"3rd"},{step:4,name:"".concat(e," \xb7 4转"),short:"4th"},{step:5,name:"".concat(e," \xb7 5转"),short:"V"},{step:6,name:"".concat(e," \xb7 6转"),short:"VI"}],o=e=>({...e,stages:d(e.name)}),c=[o({id:"soul-master",groupId:"warrior",name:"魂骑士",faction:"骑士团",role:"近战输出",mainStat:"力量 STR",weapons:["单手剑"]}),o({id:"mihile",groupId:"warrior",name:"米哈尔",faction:"骑士团",role:"坦辅前排",mainStat:"力量 STR",weapons:["单手剑"]}),o({id:"hero",groupId:"warrior",name:"英雄",faction:"冒险家",role:"近战爆发",mainStat:"力量 STR",weapons:["单手剑/单手斧","双手剑/双手斧"]}),o({id:"aran",groupId:"warrior",name:"战神",faction:"英雄团",role:"连段近战",mainStat:"力量 STR",weapons:["矛"]}),o({id:"demon-slayer",groupId:"warrior",name:"恶魔猎手",faction:"反抗者",role:"近战输出",mainStat:"力量 STR",weapons:["单手钝器/双手钝器"]}),o({id:"demon-avenger",groupId:"warrior",name:"恶魔复仇者",faction:"反抗者",role:"近战输出",mainStat:"生命值 HP",weapons:["单手钝器/双手钝器"]}),o({id:"blaster",groupId:"warrior",name:"爆破手",faction:"反抗者",role:"高操作近战",mainStat:"力量 STR",weapons:["重拳"]}),o({id:"kaiser",groupId:"warrior",name:"狂龙战士",faction:"诺巴",role:"变身近战",mainStat:"力量 STR",weapons:["大剑"]}),o({id:"adele",groupId:"warrior",name:"御剑骑士",faction:"格兰蒂斯",role:"近战输出",mainStat:"力量 STR",weapons:["调律剑"]}),o({id:"hayato",groupId:"warrior",name:"剑豪",faction:"晓之阵",role:"近战输出",mainStat:"敏捷 DEX",weapons:["太刀"]}),o({id:"zero",groupId:"warrior",name:"神之子",faction:"晓之阵",role:"双形态输出",mainStat:"力量 STR",weapons:["双剑"]}),o({id:"flame-wizard",groupId:"magician",name:"炎术士",faction:"骑士团",role:"法系输出",mainStat:"智力 INT",weapons:["法杖/法棒"]}),o({id:"archmage-il",groupId:"magician",name:"大魔导士（冰雷）",faction:"冒险家",role:"控场输出",mainStat:"智力 INT",weapons:["法杖/法棒"]}),o({id:"bishop",groupId:"magician",name:"主教",faction:"冒险家",role:"团队辅助",mainStat:"智力 INT",weapons:["法杖/法棒"]}),o({id:"luminous",groupId:"magician",name:"夜光法师",faction:"英雄团",role:"法系爆发",mainStat:"智力 INT",weapons:["光暗法杖"]}),o({id:"battle-mage",groupId:"magician",name:"唤灵斗师",faction:"反抗者",role:"近战法系",mainStat:"智力 INT",weapons:["长杖"]}),o({id:"illium",groupId:"magician",name:"圣晶使徒",faction:"格兰蒂斯",role:"法系输出",mainStat:"智力 INT",weapons:["魔导书"]}),o({id:"kinesis",groupId:"magician",name:"超能力者",faction:"异世界",role:"法系控场",mainStat:"智力 INT",weapons:["精神力"]}),o({id:"kanna",groupId:"magician",name:"阴阳师",faction:"晓之阵",role:"召唤辅助",mainStat:"智力 INT",weapons:["扇/符咒"]}),o({id:"lara",groupId:"magician",name:"拉拉",faction:"阿尼玛",role:"法系输出",mainStat:"智力 INT",weapons:["扇"]}),o({id:"beast-tamer",groupId:"magician",name:"林之灵",faction:"异界来客",role:"多形态辅助",mainStat:"智力 INT",weapons:["魔杖"]}),o({id:"marksman",groupId:"bowman",name:"神射手",faction:"冒险家",role:"远程爆发",mainStat:"敏捷 DEX",weapons:["弩"]}),o({id:"bowmaster",groupId:"bowman",name:"箭神",faction:"冒险家",role:"远程持续",mainStat:"敏捷 DEX",weapons:["弓"]}),o({id:"pathfinder",groupId:"bowman",name:"古迹猎人",faction:"冒险家",role:"远程清怪",mainStat:"敏捷 DEX",weapons:["远古弓"]}),o({id:"wind-archer",groupId:"bowman",name:"风灵使者",faction:"骑士团",role:"远程持续",mainStat:"敏捷 DEX",weapons:["弓"]}),o({id:"mercedes",groupId:"bowman",name:"双弩精灵",faction:"英雄团",role:"高机动输出",mainStat:"敏捷 DEX",weapons:["双弩枪"]}),o({id:"wild-hunter",groupId:"bowman",name:"豹弩游侠",faction:"反抗者",role:"召唤输出",mainStat:"敏捷 DEX",weapons:["弩弓"]}),o({id:"inferno-hacker",groupId:"bowman",name:"炼狱黑客",faction:"—",role:"远程输出",mainStat:"敏捷 DEX",weapons:["—"]}),o({id:"dual-blade",groupId:"thief",name:"暗影双刀",faction:"冒险家",role:"近战爆发",mainStat:"运气 LUK",weapons:["短刀/双刀"]}),o({id:"night-lord",groupId:"thief",name:"标飞",faction:"冒险家",role:"高速爆发",mainStat:"运气 LUK",weapons:["飞镖"]}),o({id:"shadower",groupId:"thief",name:"刀飞",faction:"冒险家",role:"近战机动",mainStat:"运气 LUK",weapons:["短刀"]}),o({id:"night-walker",groupId:"thief",name:"夜行者",faction:"骑士团",role:"高速输出",mainStat:"运气 LUK",weapons:["飞镖"]}),o({id:"phantom",groupId:"thief",name:"幻影",faction:"英雄团",role:"多功能输出",mainStat:"运气 LUK",weapons:["手杖"]}),o({id:"xenon-thief",groupId:"thief",name:"尖兵",faction:"反抗者",role:"混合输出",mainStat:"多属性",weapons:["能量剑"]}),o({id:"cadena",groupId:"thief",name:"魔链影士",faction:"格兰蒂斯",role:"高机动输出",mainStat:"运气 LUK",weapons:["锁链"]}),o({id:"hoyoung",groupId:"thief",name:"虎影",faction:"阿尼玛",role:"近战输出",mainStat:"运气 LUK",weapons:["仙扇"]}),o({id:"khali",groupId:"thief",name:"卡莉",faction:"格兰蒂斯",role:"高速输出",mainStat:"运气 LUK",weapons:["查克拉刃"]}),o({id:"cannoneer",groupId:"pirate",name:"火炮手",faction:"冒险家",role:"远程爆发",mainStat:"力量 STR",weapons:["火炮"]}),o({id:"buccaneer",groupId:"pirate",name:"冲锋队长",faction:"冒险家",role:"近战连段",mainStat:"力量 STR",weapons:["指节"]}),o({id:"corsair",groupId:"pirate",name:"船长",faction:"冒险家",role:"远程召唤",mainStat:"敏捷 DEX",weapons:["手枪"]}),o({id:"thunder-breaker",groupId:"pirate",name:"奇袭者",faction:"骑士团",role:"近战输出",mainStat:"力量 STR",weapons:["指节"]}),o({id:"shade",groupId:"pirate",name:"隐月",faction:"英雄团",role:"近战持续",mainStat:"力量 STR",weapons:["拳爪"]}),o({id:"mechanic",groupId:"pirate",name:"机械师",faction:"反抗者",role:"召唤输出",mainStat:"敏捷 DEX",weapons:["机甲枪"]}),o({id:"xenon-pirate",groupId:"pirate",name:"尖兵",faction:"反抗者",role:"混合输出",mainStat:"多属性",weapons:["能量剑"]}),o({id:"angelic-buster",groupId:"pirate",name:"爆莉萌天使",faction:"诺巴",role:"远程爆发",mainStat:"敏捷 DEX",weapons:["灵魂手铳"]}),o({id:"khain",groupId:"pirate",name:"影魂异人",faction:"格兰蒂斯",role:"近战输出",mainStat:"力量 STR",weapons:["指节"]}),o({id:"mo-xuan",groupId:"pirate",name:"墨玄",faction:"—",role:"近战输出",mainStat:"力量 STR",weapons:["拳套"]})];var m=a(9935);function x(e){var t,a;let{groups:l,groupId:n,onGroupChange:i,lines:d,selectedLineId:o,onLineChange:c}=e,x=null!==(t=l.find(e=>e.id===n))&&void 0!==t?t:l[0],[p,b]=(0,s.useState)(!1),[h,u]=(0,s.useState)(!1),[g,f]=(0,s.useState)(null),[w,v]=(0,s.useState)(null),[k,j]=(0,s.useState)(300),N=(0,s.useMemo)(()=>{var e;return Array.from(new Set(null!==(e=null==w?void 0:w.totals.map(e=>e.above_level))&&void 0!==e?e:[])).sort((e,t)=>t-e)},[w]),y=(0,s.useMemo)(()=>{var e;return[...null!==(e=null==w?void 0:w.items.filter(e=>e.above_level===k))&&void 0!==e?e:[]].sort((e,t)=>t.count-e.count).slice(0,30)},[w,k]),S=(0,s.useCallback)(async()=>{if(!h){u(!0),f(null);try{var e;let t=await fetch("https://api.maplerhouse.com/api/v1/rank-stats?server=tms");if(!t.ok)throw Error("请求失败：".concat(t.status));let a=await t.json();if(!a||"object"!=typeof a||!a.data)throw Error("返回数据格式异常");v(a.data);let r=a.data.totals.map(e=>e.above_level).sort((e,t)=>t-e),s=null!==(e=r[0])&&void 0!==e?e:300;j(e=>r.includes(e)?e:s)}catch(e){f(e instanceof Error?e.message:"加载失败")}finally{u(!1)}}},[h]);return(0,s.useEffect)(()=>{p&&!w&&S()},[w,p,S]),(0,s.useEffect)(()=>{if(!p)return;let e=e=>{"Escape"===e.key&&b(!1)};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[p]),(0,r.jsxs)("div",{className:"overflow-hidden rounded-2xl border border-slate-100 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900/40",children:[(0,r.jsx)("div",{className:"border-b border-slate-100 bg-slate-50/70 px-5 py-4 dark:border-slate-800 dark:bg-slate-900/30",children:(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"职业选择"}),(0,r.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"选择职业路线，在右侧查看转职与技能。"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{type:"button",onClick:()=>b(!0),className:"inline-flex items-center rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 shadow-sm transition-colors hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900/30 dark:text-slate-200 dark:hover:bg-slate-900/50",children:"职业分布"})})]})}),(0,r.jsxs)("div",{className:"p-5",children:[(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:l.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>i(e.id),className:(0,m.cn)("inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition-all",n===e.id?"border-transparent bg-slate-900 text-white shadow-sm dark:bg-white dark:text-slate-900":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900/30 dark:text-slate-200 dark:hover:bg-slate-900/50"),children:[(0,r.jsx)("span",{className:(0,m.cn)("h-2 w-2 rounded-full bg-gradient-to-br",e.tone)}),e.label]},e.id))}),(0,r.jsx)("div",{className:"mt-5 grid grid-cols-1 gap-3 sm:grid-cols-2",children:d.map(e=>{let t=e.id===o;return e.stages.slice(0,4).map(e=>e.name).join(" → "),(0,r.jsxs)("button",{type:"button",onClick:()=>c(e.id),className:(0,m.cn)("group relative overflow-hidden rounded-xl border p-4 text-left transition-all",t?"border-transparent bg-slate-900 text-white shadow-md dark:bg-white dark:text-slate-900":"border-slate-200 bg-white hover:-translate-y-0.5 hover:shadow-md dark:border-slate-700 dark:bg-slate-900/20 dark:hover:bg-slate-900/35"),children:[(0,r.jsx)("div",{className:(0,m.cn)("absolute top-0 right-0 h-20 w-20 translate-x-8 -translate-y-8 rounded-full bg-gradient-to-br opacity-40 blur-2xl",x.tone)}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,r.jsx)("div",{className:"text-sm font-extrabold",children:e.name}),(0,r.jsx)("span",{className:(0,m.cn)("rounded-full px-2 py-0.5 text-[10px] font-bold",t?"bg-white/15 text-white dark:bg-slate-900/10 dark:text-slate-900":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200"),children:e.mainStat})]}),e.faction?(0,r.jsx)("div",{className:(0,m.cn)("mt-2 inline-flex items-center rounded-full px-2 py-0.5 text-[10px] font-bold",t?"bg-white/15 text-white dark:bg-slate-900/10 dark:text-slate-900":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200"),children:e.faction}):null,(0,r.jsx)("div",{className:(0,m.cn)("mt-2 text-xs leading-relaxed",t?"text-white/80 dark:text-slate-700":"text-slate-500 dark:text-slate-400")}),(0,r.jsx)("div",{className:(0,m.cn)("mt-3 text-[11px] font-semibold",t?"text-white/85 dark:text-slate-700":"text-slate-600 dark:text-slate-300"),children:e.role})]})]},e.id)})})]}),p?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-950/40 px-4 py-6 backdrop-blur-sm",onClick:()=>b(!1),children:(0,r.jsxs)("div",{role:"dialog","aria-modal":"true","aria-label":"职业分布",className:"w-full max-w-3xl overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-2xl dark:border-slate-800 dark:bg-slate-950",onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between gap-3 border-b border-slate-100 bg-slate-50/80 px-5 py-4 dark:border-slate-900 dark:bg-slate-950",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"职业分布（参考台服数据）"}),(0,r.jsxs)("div",{className:"mt-0.5 text-xs text-slate-500 dark:text-slate-400",children:["最新日期：",null!==(a=null==w?void 0:w.latest_date)&&void 0!==a?a:"—"]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:S,className:(0,m.cn)("inline-flex items-center rounded-full border px-3 py-1.5 text-xs font-semibold transition-colors",h?"cursor-not-allowed border-slate-200 bg-slate-50 text-slate-400 dark:border-slate-800 dark:bg-slate-900/40 dark:text-slate-500":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900/30 dark:text-slate-200 dark:hover:bg-slate-900/50"),children:h?"加载中…":"刷新"}),(0,r.jsx)("button",{type:"button",onClick:()=>b(!1),className:"inline-flex items-center rounded-full border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 transition-colors hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900/30 dark:text-slate-200 dark:hover:bg-slate-900/50",children:"关闭"})]})]}),(0,r.jsxs)("div",{className:"px-5 py-4",children:[g?(0,r.jsx)("div",{className:"rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-800 dark:border-rose-900/60 dark:bg-rose-900/20 dark:text-rose-200",children:g}):null,(0,r.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[(0,r.jsx)("div",{className:"text-xs font-semibold text-slate-600 dark:text-slate-300",children:"等级阈值："}),N.length?N.map(e=>{var t,a;let s=e===k,l=null!==(a=null==w?void 0:null===(t=w.totals.find(t=>t.above_level===e))||void 0===t?void 0:t.count)&&void 0!==a?a:0;return(0,r.jsxs)("button",{type:"button",onClick:()=>j(e),className:(0,m.cn)("inline-flex items-center gap-2 rounded-full border px-3 py-1.5 text-xs font-semibold transition-colors",s?"border-transparent bg-slate-900 text-white dark:bg-white dark:text-slate-900":"border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-800 dark:bg-slate-900/30 dark:text-slate-200 dark:hover:bg-slate-900/50"),children:[e,"+",(0,r.jsx)("span",{className:(0,m.cn)("rounded-full px-2 py-0.5 text-[10px] font-bold",s?"bg-white/15 text-white dark:bg-slate-900/10 dark:text-slate-900":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200"),children:l.toLocaleString()})]},e)}):(0,r.jsx)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:"暂无数据"})]}),(0,r.jsxs)("div",{className:"mt-4 overflow-hidden rounded-xl border border-slate-100 dark:border-slate-900",children:[(0,r.jsxs)("div",{className:"grid grid-cols-12 bg-slate-50 px-4 py-2 text-[11px] font-semibold text-slate-600 dark:bg-slate-950 dark:text-slate-300",children:[(0,r.jsx)("div",{className:"col-span-5",children:"职业"}),(0,r.jsx)("div",{className:"col-span-3",children:"数量"}),(0,r.jsx)("div",{className:"col-span-2",children:"占比"}),(0,r.jsx)("div",{className:"col-span-2",children:"1日"})]}),(0,r.jsxs)("div",{className:"max-h-[360px] overflow-auto bg-white dark:bg-slate-950",children:[y.map(e=>{var t,a;return(0,r.jsxs)("div",{className:"grid grid-cols-12 items-center border-t border-slate-100 px-4 py-2 text-sm text-slate-700 dark:border-slate-900 dark:text-slate-200",children:[(0,r.jsx)("div",{className:"col-span-5 font-semibold",children:e.job}),(0,r.jsx)("div",{className:"col-span-3 font-mono text-[13px]",children:e.count.toLocaleString()}),(0,r.jsxs)("div",{className:"col-span-2 text-[12px]",children:[(100*e.ratio).toFixed(2),"%"]}),(0,r.jsx)("div",{className:"col-span-2 text-[12px]",children:null!==(a=null===(t=e.deltas["1d"])||void 0===t?void 0:t.count)&&void 0!==a?a:0})]},"".concat(e.job,"-").concat(e.above_level))}),y.length?null:(0,r.jsx)("div",{className:"px-4 py-8 text-center text-sm text-slate-500 dark:text-slate-400",children:h?"加载中…":"暂无数据"})]})]})]})]})}):null]})}function p(e){var t;let{line:a,group:s,step:l,onStepChange:d,skills:o,loading:c,error:x}=e,p=null!==(t=a.stages.find(e=>e.step===l))&&void 0!==t?t:a.stages[a.stages.length-1];return(0,r.jsxs)("div",{className:"overflow-hidden rounded-2xl border border-slate-100 bg-white shadow-sm dark:border-slate-800 dark:bg-slate-900/40",children:[(0,r.jsxs)("div",{className:"border-b border-slate-100 bg-slate-50/70 px-6 py-5 dark:border-slate-800 dark:bg-slate-900/30",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-start md:justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,r.jsx)("h2",{className:"text-2xl font-black text-slate-900 dark:text-white",children:a.name}),(0,r.jsx)("span",{className:"rounded-full bg-slate-900 px-2.5 py-1 text-[11px] font-bold text-white dark:bg-white dark:text-slate-900",children:a.role}),a.faction?(0,r.jsx)("span",{className:"rounded-full bg-slate-100 px-2.5 py-1 text-[11px] font-bold text-slate-700 dark:bg-slate-800 dark:text-slate-200",children:a.faction}):null]}),(0,r.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2 text-xs text-slate-600 dark:text-slate-300",children:[(0,r.jsxs)("span",{className:"rounded-lg bg-white px-2 py-1 text-[11px] font-semibold text-slate-700 shadow-sm ring-1 ring-slate-200 dark:bg-slate-950 dark:text-slate-200 dark:ring-slate-800",children:["主属性：",a.mainStat]}),(0,r.jsxs)("span",{className:"rounded-lg bg-white px-2 py-1 text-[11px] font-semibold text-slate-700 shadow-sm ring-1 ring-slate-200 dark:bg-slate-950 dark:text-slate-200 dark:ring-slate-800",children:["武器：",a.weapons.join(" / ")]})]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:i.map(e=>{let t=e===l;return(0,r.jsx)("button",{type:"button",onClick:()=>d(e),className:(0,m.cn)("inline-flex items-center gap-2 rounded-full border px-3 py-2 text-xs font-bold transition-all",t?(0,m.cn)("border-transparent bg-gradient-to-r text-white shadow-sm",s.tone):"border-slate-200 bg-white text-slate-700 hover:bg-slate-50 dark:border-slate-700 dark:bg-slate-900/30 dark:text-slate-200 dark:hover:bg-slate-900/50"),children:(0,r.jsx)("span",{className:"text-[11px] opacity-90",children:n[e]})},e)})})]}),(0,r.jsx)("div",{className:"mt-5",children:(0,r.jsx)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:a.stages.map(e=>{let t=e.step===l;return(0,r.jsxs)("div",{className:(0,m.cn)("rounded-xl border p-3 transition-all",t?"border-transparent bg-slate-900 text-white shadow-sm dark:bg-white dark:text-slate-900":"border-slate-200 bg-white/70 text-slate-700 dark:border-slate-700 dark:bg-slate-900/20 dark:text-slate-200"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"text-xs font-extrabold",children:[n[e.step]," \xb7 ",e.name]}),e.short?(0,r.jsx)("div",{className:(0,m.cn)("rounded-full px-2 py-0.5 text-[10px] font-bold",t?"bg-white/15 text-white dark:bg-slate-900/10 dark:text-slate-900":"bg-slate-100 text-slate-700 dark:bg-slate-800 dark:text-slate-200"),children:e.short}):null]}),e.hint?(0,r.jsx)("div",{className:(0,m.cn)("mt-2 text-[11px] leading-relaxed",t?"text-white/80 dark:text-slate-700":"text-slate-500 dark:text-slate-400"),children:e.hint}):null]},e.step)})})})]}),(0,r.jsxs)("div",{className:"px-6 py-6",children:[(0,r.jsxs)("div",{className:"mb-4 flex items-end justify-between gap-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-sm font-bold text-slate-900 dark:text-white",children:"技能列表"}),(0,r.jsxs)("div",{className:"text-xs text-slate-500 dark:text-slate-400",children:["当前：",n[p.step]," \xb7 ",p.name]})]}),c&&(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs font-semibold text-blue-600 dark:text-blue-400",children:[(0,r.jsx)("div",{className:"h-3 w-3 animate-spin rounded-full border-2 border-current border-t-transparent"}),"数据加载中..."]}),!c&&x&&(0,r.jsx)("div",{className:"rounded-lg bg-amber-50 px-2 py-1 text-[10px] font-bold text-amber-700 ring-1 ring-amber-200 dark:bg-amber-900/20 dark:text-amber-400 dark:ring-amber-800",children:x})]}),o.length>0?(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:o.map((e,t)=>(0,r.jsxs)("div",{className:"group relative flex flex-col overflow-hidden rounded-xl border border-slate-100 bg-white p-4 transition-all hover:border-slate-200 hover:shadow-md dark:border-slate-800 dark:bg-slate-900/40 dark:hover:border-slate-700",children:[(0,r.jsx)("div",{className:"flex items-start justify-between gap-3",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("h4",{className:"font-bold text-slate-900 dark:text-white",children:e.name}),e.type&&(0,r.jsx)("span",{className:"rounded bg-slate-100 px-1.5 py-0.5 text-[10px] font-bold text-slate-600 dark:bg-slate-800 dark:text-slate-400",children:e.type})]}),e.maxLevel&&(0,r.jsxs)("div",{className:"mt-1 text-[10px] font-semibold text-slate-400 dark:text-slate-500",children:["最高等级: ",e.maxLevel]})]})}),(0,r.jsx)("div",{className:"mt-3 text-[11px] leading-relaxed text-slate-600 dark:text-slate-400",dangerouslySetInnerHTML:{__html:e.desc}})]},"".concat(e.name,"-").concat(t)))}):(0,r.jsxs)("div",{className:"rounded-xl border border-dashed border-slate-200 bg-slate-50 px-6 py-10 text-center dark:border-slate-800 dark:bg-slate-950",children:[(0,r.jsx)("div",{className:"text-sm font-extrabold text-slate-900 dark:text-white",children:c?"正在同步数据...":5===l?"数据维护中":"暂无技能数据"}),(0,r.jsx)("div",{className:"mt-1 text-xs text-slate-500 dark:text-slate-400",children:c?"请稍候，正在为您加载最新的技能信息。":5===l?"5 转技能数据正在优化调整中，请稍后再试。":"该阶段暂未收录技能数据，我们会尽快更新。"})]})]})]})}var b=a(6228),h=a(6468),u=a.n(h);let g={hero:{1:["100"],2:["110"],3:["111"],4:["112"],5:["40001"],6:["114"]},"soul-master":{1:["1100"],2:["1110"],3:["1111"],4:["1112"],5:["40001"],6:["1114"]},mihile:{1:["5000"],2:["5110"],3:["5111"],4:["5112"],5:["40001"],6:["5114"]},paladin:{1:["100"],2:["120"],3:["121"],4:["122"],5:["40001"],6:["124"]},"dark-knight":{1:["100"],2:["130"],3:["131"],4:["132"],5:["40001"],6:["134"]},aran:{1:["2000","2100"],2:["2110"],3:["2111"],4:["2112"],5:["40001"],6:["2114"]},"demon-slayer":{1:["3001","3100"],2:["3110"],3:["3111"],4:["3112"],5:["40001"],6:["3114"]},"demon-avenger":{1:["3001","3101"],2:["3120"],3:["3121"],4:["3122"],5:["40001"],6:["3124"]},blaster:{1:["3000","3700"],2:["3710"],3:["3711"],4:["3712"],5:["40001"],6:["3714"]},kaiser:{1:["6000","6100"],2:["6110"],3:["6111"],4:["6112"],5:["40001"],6:["6114"]},adele:{1:["15001","15100"],2:["15110"],3:["15111"],4:["15112"],5:["40001"],6:["15114"]},zero:{1:["10000","10100"],2:["10110"],3:["10111"],4:["10112"],5:["40001"],6:["10114"]},"archmage-il":{1:["200"],2:["220"],3:["221"],4:["222"],5:["40002"],6:["224"]},bishop:{1:["200"],2:["230"],3:["231"],4:["232"],5:["40002"],6:["234"]},"flame-wizard":{1:["1200"],2:["1210"],3:["1211"],4:["1212"],5:["40002"],6:["1214"]},luminous:{1:["2004","2700"],2:["2710"],3:["2711"],4:["2712"],5:["40002"],6:["2714"]},"battle-mage":{1:["3000","3200"],2:["3210"],3:["3211"],4:["3212"],5:["40002"],6:["3214"]},kinesis:{1:["14000","14200"],2:["14210"],3:["14211"],4:["14212"],5:["40002"],6:["14214"]},lara:{1:["16000","16200"],2:["16210"],3:["16211"],4:["16212"],5:["40002"],6:["16214"]},marksman:{1:["300"],2:["320"],3:["321"],4:["322"],5:["40003"],6:["324"]},bowmaster:{1:["300"],2:["310"],3:["311"],4:["312"],5:["40003"],6:["314"]},"wind-archer":{1:["1300"],2:["1310"],3:["1311"],4:["1312"],5:["40003"],6:["1314"]},mercedes:{1:["2002","2300"],2:["2310"],3:["2311"],4:["2312"],5:["40003"],6:["2314"]},"wild-hunter":{1:["3000","3300"],2:["3310"],3:["3311"],4:["3312"],5:["40003"],6:["3314"]},"night-lord":{1:["400"],2:["410"],3:["411"],4:["412"],5:["40004"],6:["414"]},shadower:{1:["400"],2:["420"],3:["421"],4:["422"],5:["40004"],6:["424"]},"dual-blade":{1:["400","430"],2:["431","432"],3:["433"],4:["434"],5:["40004"],6:["436"]},"night-walker":{1:["1400"],2:["1410"],3:["1411"],4:["1412"],5:["40004"],6:["1414"]},phantom:{1:["2003","2400"],2:["2410"],3:["2411"],4:["2412"],5:["40004"],6:["2414"]},cadena:{1:["60002","6400"],2:["6410"],3:["6411"],4:["6412"],5:["40004"],6:["6414"]},hoyoung:{1:["16001","16400"],2:["16410"],3:["16411"],4:["16412"],5:["40004"],6:["16414"]},buccaneer:{1:["500"],2:["510"],3:["511"],4:["512"],5:["40005"],6:["514"]},corsair:{1:["500"],2:["520"],3:["521"],4:["522"],5:["40005"],6:["524"]},cannoneer:{1:["530"],2:["531"],3:["532"],4:["534"],5:["40005"],6:["536"]},"thunder-breaker":{1:["1500"],2:["1510"],3:["1511"],4:["1512"],5:["40005"],6:["1514"]},shade:{1:["2005","2500"],2:["2510"],3:["2511"],4:["2512"],5:["40005"],6:["2514"]},mechanic:{1:["3000","3500"],2:["3510"],3:["3511"],4:["3512"],5:["40005"],6:["3514"]},"angelic-buster":{1:["6001","6500"],2:["6510"],3:["6511"],4:["6512"],5:["40005"],6:["6514"]},"xenon-thief":{1:["3002","3600"],2:["3610"],3:["3611"],4:["3612"],5:["40004","40005"],6:["3614"]},"xenon-pirate":{1:["3002","3600"],2:["3610"],3:["3611"],4:["3612"],5:["40004","40005"],6:["3614"]},"inferno-hacker":{1:["6001","6300"],2:["6310"],3:["6311"],4:["6312"],5:["40003"],6:["6314"]},khain:{1:["15002","15500"],2:["15510"],3:["15511"],4:["15512"],5:["40005"],6:["15514"]},pathfinder:{1:["301"],2:["330"],3:["331"],4:["332"],5:["40003"],6:["334"]},hayato:{1:["4001","4100"],2:["4110"],3:["4111"],4:["4112"],5:["40001"],6:["4114"]},kanna:{1:["4002","4200"],2:["4210"],3:["4211"],4:["4212"],5:["40002"],6:["4214"]},illium:{1:["15001","15200"],2:["15210"],3:["15211"],4:["15212"],5:["40002"],6:["15214"]},"beast-tamer":{1:["11000","11200"],2:["11210"],3:["11211"],4:["11212"],5:["40002"],6:["11214"]},khali:{1:["15002","15900"],2:["15910"],3:["15911"],4:["15912"],5:["40004"],6:["15914"]},"mo-xuan":{1:["17000","17500"],2:["17510"],3:["17511"],4:["17512"],5:["40005"],6:["17514"]}};var f=a(5036);function w(){var e;let[t,a]=(0,s.useState)("warrior"),[n,i]=(0,s.useState)("soul-master"),[d,o]=(0,s.useState)(6),[h,w]=(0,s.useState)([]),[v,k]=(0,s.useState)(!0),[j,N]=(0,s.useState)(null),y="/web",S=null!==(e=f.env.NEXT_PUBLIC_PRIVATE_DATA_KEY)&&void 0!==e?e:"";(0,s.useEffect)(()=>{let e=(()=>{let e=S.trim();if(e)return(0,b.Jt)(e);try{var t;let e=null===(t=sessionStorage.getItem("PRIVATE_DATA_KEY"))||void 0===t?void 0:t.trim();if(e)return(0,b.Jt)(e)}catch(e){}return(0,b.Jt)("maplestory")})();if(!e){k(!1),N("未找到数据访问密钥");return}(async()=>{try{let t=await (0,b.ml)("".concat(y,"/private/db_c2a1.csv.zip"),e,/(^|\/)db_c2a1\.csv\.enc$/i);u().parse(t,{header:!0,skipEmptyLines:!0,complete:e=>{w(e.data),k(!1)},error:e=>{console.error("CSV parse error:",e),N("技能数据解析失败"),k(!1)}})}catch(e){console.error("Failed to load skills:",e),N("无法加载加密技能数据，已显示基础版本"),k(!1)}})()},[y,S]);let I=(0,s.useMemo)(()=>{var e;return null!==(e=l.find(e=>e.id===t))&&void 0!==e?e:l[0]},[t]),E=(0,s.useMemo)(()=>c.filter(e=>e.groupId===t),[t]),T=(0,s.useMemo)(()=>{var e;let t=E.find(e=>e.id===n);return null!==(e=null!=t?t:E[0])&&void 0!==e?e:c[0]},[E,n]),D=(0,s.useMemo)(()=>{if(5===d)return[];h.length;let e=g[T.id];if(!e)return[];let t=e[d]||[];return 0===t.length?[]:h.filter(e=>{var a;if("True"===e.invisible&&(!e.skillName||!e.skillDesc))return!1;let r=(null===(a=e.jobID)||void 0===a?void 0:a.trim().replace(/^0+/,""))||"";return t.some(e=>r===e.trim().replace(/^0+/,""))}).map(e=>{let t="主动",a=e.skillDesc||"";return e.skillName,a.includes("被动")||a.includes("永久")?t="被动":a.includes("召唤")?t="召唤":("1"===e.hyper||"2"===e.hyper||a.includes("持续")&&(a.includes("冷却")||a.includes("准备")))&&(t="Buff"),("40000"===e.jobID||"40001"===e.jobID||"40002"===e.jobID||"40003"===e.jobID||"40004"===e.jobID||"40005"===e.jobID)&&(t="通用"),{name:e.skillName,type:t,maxLevel:e.maxLevel,desc:(0,m.c)(a)}})},[h,T.id,T.name,d]);return(0,r.jsxs)("div",{className:"min-h-screen bg-slate-50 font-[family-name:var(--font-inter-tight)] dark:bg-slate-900",children:[(0,r.jsxs)("div",{className:"relative overflow-hidden bg-[#1a2e5a] py-14 text-white",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-cover bg-center opacity-25 mix-blend-overlay"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-[#1a2e5a]/20 via-[#1a2e5a]/75 to-[#1a2e5a]"}),(0,r.jsx)("div",{className:"relative z-10 mx-auto w-full max-w-[1440px] px-4",children:(0,r.jsxs)("div",{className:"max-w-3xl",children:[(0,r.jsx)("div",{className:"mb-4 inline-flex items-center gap-2 rounded-full border border-white/15 bg-white/10 px-3 py-1 text-xs font-semibold text-blue-50 backdrop-blur",children:"冒险岛职业系列"}),(0,r.jsx)("h1",{className:"mb-4 text-4xl font-bold tracking-tight",children:"职业介绍"}),(0,r.jsx)("p",{className:"text-lg text-blue-100",children:"左侧选择职业路线，右侧切换 1–6 转查看技能与定位。"})]})})]}),(0,r.jsx)("div",{className:"mx-auto w-full max-w-[1440px] px-4 py-10",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-12",children:[(0,r.jsx)("section",{className:"lg:col-span-4",children:(0,r.jsx)(x,{groups:l,groupId:t,onGroupChange:e=>{a(e);let t=c.filter(t=>t.groupId===e)[0];t&&(i(t.id),o(6))},lines:E,selectedLineId:T.id,onLineChange:e=>{i(e),o(6)}})}),(0,r.jsx)("section",{className:"lg:col-span-8",children:(0,r.jsx)(p,{line:T,group:I,step:d,onStepChange:o,skills:D,loading:v,error:j})})]})})]})}},6228:(e,t,a)=>{"use strict";a.d(t,{Jt:()=>n,ml:()=>c});var r=a(4094),s=a(827);let l=new TextEncoder().encode("MPD1"),n=e=>{let t=e.trim();return"mapletool"===t||"maplestory"===t?"mapletool-maplestory":t},i=async(e,t)=>{var a,s,l;let n=await fetch(e);if(!n.ok)throw Error("Failed to load ZIP file");let i=new Uint8Array(await n.arrayBuffer()),d=Object.entries((0,r.AO)(i)).filter(e=>{let[t,a]=e;return!t.endsWith("/")&&a&&a.length>0}),o=null!==(l=null!==(s=null!==(a=t?d.find(e=>{let[a]=e;return t.test(a)}):void 0)&&void 0!==a?a:d.find(e=>{let[t]=e;return t.toLowerCase().endsWith(".enc")}))&&void 0!==s?s:d.find(e=>{let[t]=e;return t.toLowerCase().endsWith(".csv")}))&&void 0!==l?l:d[0];if(!o)throw Error("ZIP file contains no readable entries");return o[1]},d=async(e,t)=>{let a=new TextEncoder().encode(e),r=new Uint8Array(await (0,s.scrypt)(a,t,16384,8,1,32)).buffer;return crypto.subtle.importKey("raw",r,"AES-GCM",!1,["decrypt"])},o=async(e,t)=>{if(e.length<49)throw Error("Encrypted file is too small");if(!e.slice(0,4).every((e,t)=>e===l[t]))throw Error("Invalid encrypted file header");let a=e[4];if(1!==a)throw Error("Unsupported encrypted version: ".concat(a));let r=e.slice(5,21),s=e.slice(21,33),n=e.slice(33,49),i=e.slice(49),o=await d(t,r),c=new Uint8Array(i.length+n.length);return c.set(i),c.set(n,i.length),new Uint8Array(await crypto.subtle.decrypt({name:"AES-GCM",iv:s,additionalData:l,tagLength:128},o,c))},c=async(e,t,a)=>{let s=await i(e,a),l=await o(s,t);return(0,r.he)(l)}},9935:(e,t,a)=>{"use strict";a.d(t,{O:()=>n,c:()=>i,cn:()=>l});var r=a(2890),s=a(5902);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}function n(e){if(!e||e.startsWith("http")||e.startsWith("//")||e.startsWith("data:"))return e;let t=e.startsWith("/")?e:"/".concat(e);return"".concat("/web").concat(t)}function i(e){return e?e.replace(/\\n/g,"<br/>").replace(/\#c([^#]+)\#/g,'<span class="inline-block px-1.5 py-0.5 bg-blue-50 text-blue-700 rounded text-[10px] font-bold mx-1 dark:bg-blue-900/30 dark:text-blue-300">$1</span>'):""}}},e=>{var t=t=>e(e.s=t);e.O(0,[141,285,2,873,358],()=>t(2941)),_N_E=e.O()}]);